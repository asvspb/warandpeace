# War & Peace — .env.example
# Заполните секреты и при необходимости измените дефолты.
# Формат: KEY=value (без кавычек).

# --- Основное/БД ---
DB_SQLITE_PATH=/app/database/articles.db
TIMEZONE=Europe/Moscow

# --- Telegram ---
TELEGRAM_BOT_TOKEN=changeme
TELEGRAM_CHANNEL_ID=123456789
TELEGRAM_ADMIN_ID=123456789
# TELEGRAM_ADMIN_IDS=123456789,987654321

# --- LLM и модели ---
LLM_PRIMARY=gemini                 # gemini|mistral
GEMINI_ENABLED=true                # true|false|1|0|yes|no
MISTRAL_ENABLED=true               # true|false|1|0|yes|no
# Рекомендуется указывать список ключей через запятую:
GOOGLE_API_KEYS=
# Для обратной совместимости можно также задать одиночные ключи:
# GOOGLE_API_KEY=
# GOOGLE_API_KEY_1=

MISTRAL_API_KEY=
GEMINI_MODEL_NAME=models/gemini-1.5-flash-latest
MISTRAL_MODEL_NAME=mistral-large-latest

# --- Директории шаблонов промптов ---
PROMPTS_DIR=prompts

# --- Веб-интерфейс ---
WEB_ENABLED=false                  # включить сервер (uvicorn) при запуске server.py напрямую
WEB_HOST=0.0.0.0
WEB_PORT=8080
WEB_API_ENABLED=false              # включить API-роуты
# Если нужно защищать API по ключу — задайте ключ. Проверяется в заголовке X-API-Key
# или Authorization: Api-Key <ключ> только для маршрутов /api при WEB_API_ENABLED=true.
WEB_API_KEY=
# Для Basic Auth укажите оба значения:
# WEB_BASIC_AUTH_USER=admin
# WEB_BASIC_AUTH_PASSWORD=strongpass

# --- Метрики ---
METRICS_ENABLED=true
METRICS_PORT=8000

# --- Логи и таймауты Telegram ---
LOG_LEVEL=INFO
ENABLE_VERBOSE_LIB_LOGS=false
ADMIN_ALERTS_COOLDOWN_SEC=900      # троттлинг повторных админ-уведомлений (секунды)
TG_RETRY_ATTEMPTS=4
LOG_POST_EXAMPLES=3
MAX_POSTS_PER_RUN=3
JOB_MISFIRE_GRACE=60
JOB_JITTER=3
TG_READ_TIMEOUT=60
TG_WRITE_TIMEOUT=60
TG_CONNECT_TIMEOUT=30
TG_POOL_TIMEOUT=60
TG_HTTP_VERSION=1.1
TG_POLL_INTERVAL=1.0
TG_LONG_POLL_TIMEOUT=10

# --- Circuit Breaker / сеть ---
TG_CB_FAILURE_THRESHOLD=5
TG_CB_FAILURE_WINDOW_SEC=60
TG_CB_OPEN_COOLDOWN_SEC=30
NET_LOG_THROTTLE_SEC=900

# --- Бэкапы / восстановление ---
LOCAL_BACKUP_DIR=/var/backups/warandpeace
BACKUP_TMP_DIR=/tmp/backup
BACKUP_RETENTION_DAYS=0           # дней хранения бэкапов (0 — отключено)
LOCAL_MIN_FREE_GB=0               # мин. свободное место в ГБ (0 — проверка отключена)
# Шифрование age:
# AGE_PUBLIC_KEYS=age1xxxx,age1yyyy
# AGE_SECRET_KEY=AGE-SECRET-KEY-xxxxxxxx

# --- Прочее для утилит ---
APP_DIR=/app                      # путь, где лежит .env (используется в backup env)
