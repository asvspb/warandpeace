# План: Улучшения UI/UX календаря и суммаризации по требованию

**Статус:** Завершено

## Цель

Улучшить пользовательский опыт взаимодействия с календарем и списком статей, добавив асинхронную подгрузку данных, возможность запускать суммаризацию для отдельных статей и визуальную обратную связь для длительных операций.

## План работ

### Этап 1: Бэкенд и API [x]
- [x] Создать эндпоинт `/articles/{article_id}/summarize` (POST) для запуска суммаризации одной статьи.
- [x] Реализовать логику запуска суммаризации в фоновом режиме.
- [x] Добавить SSE-уведомление для обновления UI после завершения.
- [x] Создать эндпоинт `/calendar-fragment` для асинхронной отдачи HTML-кода календаря.
- [x] Улучшить сервис `get_calendar_data` для отображения метрик по статьям (общее число / число без суммаризации).

### Этап 2: Фронтенд и UI/UX [x]
- [x] Внедрить AJAX-запрос к `/calendar-fragment` с автоматическим обновлением каждые 5 минут.
- [x] Заменить статус "Нет" (суммаризации) на кликабельный элемент, вызывающий API `/summarize`.
- [x] Добавить анимацию "pulse" и смену текста на "Обработка..." при запуске суммаризации.
- [x] Реализовать модальное окно с индикатором прогресса для наглядности.
- [x] Отображать метрики по статьям в ячейках календаря.

### Этап 3: Тестирование [x]
- [x] Написать бэкенд-тесты для новых эндпоинтов (`/calendar-fragment`, `/summarize`).
- [x] Внедрить `jsdom` и `vitest` для юнит-тестирования фронтенда.
- [x] Написать юнит-тесты для логики календаря на фронтенде.
- [x] Написать E2E-тесты с использованием Playwright для проверки всего пользовательского сценария.

### Этап 4: Инфраструктура и надежность [x]
- [x] Добавить Healthcheck для веб-сервиса в `docker-compose.yml`.
- [x] Реализовать `bot-watchdog` для автоматического перезапуска бота в случае сбоя.
- [x] Настроить Caddy для работы по HTTPS.
