{% extends "base.html" %}

{% block title %}Статистика сессии - {{ super() }}{% endblock %}

{% block content %}
    <header style="margin-bottom: 24px;">
        <h1>Статистика текущей сессии</h1>
        <p class="muted">Метрики работы бота с момента последнего перезапуска.</p>
    </header>

    <section class="card">
        <h2 style="margin-top:0;">Сводка</h2>
        <table class="table" style="width:100%; border-collapse: collapse;">
            <thead>
                <tr>
                    <th style="text-align:left; padding:8px; border-bottom:1px solid var(--border);"><small>Ключ</small></th>
                    <th style="text-align:left; padding:8px; border-bottom:1px solid var(--border);"><small>Значение</small></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:8px;">external_http_requests</td>
                    <td style="padding:8px;"><b>{{ stats.external_http_requests | int }}</b></td>
                </tr>
                <tr>
                    <td style="padding:8px;">articles_processed</td>
                    <td style="padding:8px;"><b>{{ stats.articles_processed | int }}</b></td>
                </tr>
                <tr>
                    <td style="padding:8px;">tokens_prompt</td>
                    <td style="padding:8px;"><b>{{ stats.tokens_prompt | int }}</b></td>
                </tr>
                <tr>
                    <td style="padding:8px;">tokens_completion</td>
                    <td style="padding:8px;"><b>{{ stats.tokens_completion | int }}</b></td>
                </tr>
                <tr>
                    <td style="padding:8px;">tokens_prompt_google</td>
                    <td style="padding:8px;"><b>{{ stats.tokens_prompt_google | int }}</b></td>
                </tr>
                <tr>
                    <td style="padding:8px;">tokens_completion_google</td>
                    <td style="padding:8px;"><b>{{ stats.tokens_completion_google | int }}</b></td>
                </tr>
                <tr>
                    <td style="padding:8px;">tokens_prompt_mistral</td>
                    <td style="padding:8px;"><b>{{ stats.tokens_prompt_mistral | int }}</b></td>
                </tr>
                <tr>
                    <td style="padding:8px;">tokens_completion_mistral</td>
                    <td style="padding:8px;"><b>{{ stats.tokens_completion_mistral | int }}</b></td>
                </tr>
                <tr>
                    <td style="padding:8px;">session_start</td>
                    <td style="padding:8px;">{{ stats.session_start or '—' }}</td>
                </tr>
                <tr>
                    <td style="padding:8px;">uptime_seconds</td>
                    <td style="padding:8px;">{{ stats.uptime_seconds or 0 }}</td>
                </tr>
            </tbody>
        </table>
    </section>
{% endblock %}
