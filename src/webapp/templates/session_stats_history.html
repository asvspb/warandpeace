{% extends "base.html" %}

{% block title %}История статистики - {{ super() }}{% endblock %}

{% block content %}
<header class="page-header">
  <h1>История статистики</h1>
  <form method="get" action="/stats/history" class="ml-auto">
    <label class="muted">Дней:
      <input type="number" name="days" min="1" max="90" value="{{ days or 14 }}" class="input-narrow">
    </label>
    <button type="submit">Показать</button>
  </form>
</header>

<section>
<table class="table">
    <thead>
      <tr>
        <th>День (UTC)</th>
        <th class="text-right">Исходящие HTTP</th>
        <th class="text-right">Обработано новостей</th>
        <th class="text-right">Токены prompt</th>
        <th class="text-right">Токены completion</th>
      </tr>
    </thead>
    <tbody>
      {% for r in hist.days %}
      <tr>
        <td>{{ r.day }}</td>
        <td class="text-right">{{ r.http | int }}</td>
        <td class="text-right">{{ r.articles | int }}</td>
        <td class="text-right">{{ r.tokens_in | int }}</td>
        <td class="text-right">{{ r.tokens_out | int }}</td>
      </tr>
      {% endfor %}
      {% if not hist.days %}
      <tr>
        <td colspan="5" class="muted center pad-8">Нет данных</td>
      </tr>
      {% endif %}
    </tbody>
  </table>
</section>

<p class="mt-12"><a href="/stats">← Назад</a></p>
{% endblock %}
